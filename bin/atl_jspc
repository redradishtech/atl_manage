#!/bin/bash -eu
# JspC for compiling custom JSPs.
# Step 1: create a mappings.xml:
#
# <?xml version="1.0" encoding="UTF-8"?>
# <web-fragment xmlns="http://xmlns.jcp.org/xml/ns/javaee"
#               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
#               xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
#                       http://xmlns.jcp.org/xml/ns/javaee/web-fragment_4_0.xsd"
#               version="4.0"
#               metadata-complete="true">
#   <name>org_apache_jasper.jspc</name>
#   <distributable/>
#   <!--
# Automatically created by Apache Tomcat JspC.
# -->
# 
# ...
# 
# </web-fragment>
# 
# Step 2: compile:
# 
# atl_jspc -webapp "$ATL_APPDIR/atlassian-jira" -p 'jsp'  -d "$ATL_APPDIR/atlassian-jira/WEB-INF/classes" -webfrg mappings.xml

java -cp "$ATL_APPDIR"/bin/tomcat-juli.jar:$(echo "$ATL_APPDIR"/lib/*.jar | tr ' ' ':'):"$ATL_MANAGE"/lib/ant.jar org.apache.jasper.JspC "$@"
